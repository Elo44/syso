# This is not a mecanism test, but we make use of the simplicity of declaring tests in YAML, only available for mecanisms for now

- test: Barème mensuel
  formule:
    barème:
      assiette: 3000
      tranches:
      - en-dessous de: 5000 
        taux: 4.65%
      - de: 5000
        à: 15000
        taux: 3%
      - au-dessus de: 15000
        taux: 1%

  exemples:
    - nom: "petite assiette"
      situation:
        assiette: 3000
        base: 5000
      valeur attendue: 139.5


    

- nom: assiette
  format: €

- test: Barème annuel
  période: année
  formule:
    barème:
      # cette formule appellant l'assiette est annuelle : 
      # si l'assiette est aussi annuelle dans le contexte de la simulation actuelle, c'est bon
      # sinon une conversion est nécessaire et faite automatiquement par le moteur
      assiette: assiette
      tranches:
      # ce sont ces chiffres là qui imposent à la règle d'être annuelle
      # de plus, les règles annuelles de la loi sont rarement traduites officiellement en d'autres périodes
      - en-dessous de: 30000
        taux: 4.65%
      - de: 30000
        à: 90000
        taux: 3%
      - au-dessus de: 90000
        taux: 1%

  exemples:
    - nom: "petite assiette"
      situation:
        période: mois
        assiette: 3000
      valeur attendue: 1575

